const fixedNav=document.querySelector(".header"),scrollTopBtn=document.querySelector(".scroll-top");window.addEventListener("scroll",()=>{const e=window.scrollY;fixedNav.classList.toggle("active",e>100),scrollTopBtn.classList.toggle("active",e>500)}),scrollTopBtn.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});const barsMobile=document.querySelector(".bars"),linksMobile=document.querySelector(".nav-mobile");barsMobile.addEventListener("click",e=>{e.stopPropagation(),linksMobile.classList.toggle("active")}),barsMobile.addEventListener("keydown",e=>{"Enter"===e.key||" "===e.key&&(e.preventDefault(),linksMobile.classList.toggle("active"))}),window.addEventListener("click",e=>{linksMobile.classList.contains("active")&&!linksMobile.contains(e.target)&&!barsMobile.contains(e.target)&&linksMobile.classList.remove("active")}),document.addEventListener("keydown",e=>{"Escape"===e.key&&linksMobile.classList.contains("active")&&linksMobile.classList.remove("active")});const hadithContainer=document.querySelector(".hadith-container p"),nextBtn=document.querySelector(".buttons .next"),prevBtn=document.querySelector(".buttons .prev"),totalEl=document.querySelector(".hadith .number .total"),currentEl=document.querySelector(".hadith .number .current");let hadiths=[],hadithIndex=0;function updateHadith(){hadiths.length&&(hadithContainer.textContent=hadiths[hadithIndex].arab,totalEl.textContent=hadiths.length,currentEl.textContent=hadithIndex+1,prevBtn.disabled=0===hadithIndex,nextBtn.disabled=hadithIndex===hadiths.length-1)}function fetchHadiths(){fetch("https://api.hadith.gading.dev/books/muslim?range=1-300").then(e=>e.json()).then(e=>{hadiths=e.data.hadiths,updateHadith()}).catch(e=>console.error("Error fetching hadiths:",e))}prevBtn.addEventListener("click",()=>{hadithIndex>0&&(hadithIndex--,updateHadith())}),nextBtn.addEventListener("click",()=>{hadithIndex<hadiths.length-1&&(hadithIndex++,updateHadith())});const sections=document.querySelectorAll("section"),navLinks=document.querySelectorAll("header ul li");navLinks.forEach(e=>{e.addEventListener("click",()=>{navLinks.forEach(e=>e.classList.remove("active")),e.classList.add("active");const t=e.dataset.filter,l=document.querySelector(`section.${t}`);l&&l.scrollIntoView({behavior:"smooth"})})});function fetchSurahs(){fetch("https://api.alquran.cloud/v1/meta").then(e=>e.json()).then(e=>displaySurahs(e.data.surahs.references)).catch(e=>console.error("Error fetching surahs:",e))}function displaySurahs(e){const t=document.querySelector(".surhasContainer"),l=document.querySelector(".surah-popup"),n=l.querySelector(".close"),o=l.querySelector(".ayah");t.innerHTML=e.map(e=>`<div class="surah"><p class="title">${e.name}</p><p>${e.englishName}</p></div>`).join("");const a=t.querySelectorAll(".surah");a.forEach((e,t)=>{e.addEventListener("click",()=>{l.classList.add("active"),o.innerHTML="<p>Loading...</p>",fetch(`https://api.alquran.cloud/v1/surah/${t+1}`).then(e=>e.json()).then(e=>{const t=e.data.ayahs.map(e=>`<p>${e.text} - <small>${e.numberInSurah}</small></p>`).join("");o.innerHTML=t})})}),n.addEventListener("click",()=>{l.classList.remove("active")})}function getFormattedDate(e=new Date){const t=String(e.getDate()).padStart(2,"0"),l=String(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear();return`${t}-${l}-${n}`}function fetchPrayerTimes(){const e=getFormattedDate(),t=document.querySelector(".pray .cards");fetch(`https://api.aladhan.com/v1/timingsByCity/${e}?city=Cairo&country=Egypt&method=8`).then(e=>e.json()).then(e=>{const l=e.data.timings;t.innerHTML=Object.entries(l).map(([e,l])=>`<div class="card"><div class="circle"><svg><circle cx="100" cy="100" r="100"></circle></svg><div class="pray-time">${l}</div></div><p>${e}</p></div>`).join("")}).catch(e=>console.error("Error fetching prayer times:",e))}document.addEventListener("DOMContentLoaded",()=>{fetchHadiths(),fetchSurahs(),fetchPrayerTimes()});
